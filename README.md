### 目录说明

* contracts : 合约文件

* migrations : 部署脚本文件



### 编译环境

操作系统：Windows10

truffle: v5.3.14

node: v16.4.0

npm: 7.18.1

solc: 0.8.2

web3: 1.4.0



### 搭建并运行可升级智能合约框架

1. 在lottery根目录下

> npm install : 安装依赖包



2. 部署合约

删除build文件夹

> npx truffle migrate --network rinkeby : 编译并部署到rinkeby网络



3. 验证合约

> npx truffle run verify Migrations Lottery --network rinkeby



### 彩票说明

一、彩民：

1. 投注0~10（不含）的4个号码，并提交1个以太；

2. 可以参与多次；



二、开奖：仅管理员可开奖

1. 从0~10（不含）随机生成4个号码；

2. 中奖人：

（1）投注的4个号码与开奖的4个号码全部顺序相同：一等奖；

（2）投注的4个号码与开奖的4个号码有3个顺序相同：二等奖；

（3）投注的4个号码与开奖的4个号码有2个顺序相同：三等奖；

3. 瓜分奖池：

（1）管理员收取2%的奖池金额作为管理费；

（2）一等奖瓜分80%的奖池金额；

（3）二等奖瓜分15%的奖池金额；

（4）三等奖瓜分3%的奖池金额；

（5）未瓜分的奖池金额滚动到下一期奖池。



三、期数：每次开奖后重置抽奖且期数加1。

